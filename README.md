# schwab4s

This library (partially) includes authentication workflows to authenticate you with the Schwab API, methods to make API calls to a few supported endpoints, and models to represent request and response bodies.

## Config
```hocon
schwab {
  // Become an Individual Developer here:
  // https://developer.schwab.com/user-guides/individual-developer/become-individual-developer
  // Create an app and use the app_key and secret here.
  app_key = ""
  secret = ""
  // This is a path to a file containing the refresh token.
  // It will be autogenerated and updated whenever necessary.
  refresh_token_file = ""
}
```

## Usage
```scala 3
import scala.concurrent.ExecutionContext
import org.apache.pekko.util.Timeout

import org.apache.pekko.actor.typed.ActorSystem
import play.api.libs.ws.ahc.StandaloneAhcWSClient
import scala.concurrent.duration.*
import org.apache.pekko.actor.typed.scaladsl.Behaviors

import gg.sina.schwab.Schwab
import gg.sina.schwab.models.trader_api.{Account, AccountNumberHash}

object Example extends App {
  implicit val system: ActorSystem[?] = ActorSystem(Behaviors.same, "system")
  implicit val ec: ExecutionContext = system.executionContext
  implicit val ws: StandaloneAhcWSClient = StandaloneAhcWSClient()
  implicit val timeout: Timeout = 30.seconds
  val schwab: Schwab = Schwab()

  val accounts: Future[Vector[Account]] = schwab.TraderAPI.Accounts.accounts
  val accountNumbers: Future[Vector[AccountNumberHash]] = schwab.TraderAPI.Accounts.accountNumbers
  
  val quotes: Future[Map[String, QuoteResponse]] = schwab.MarketDataAPI.quote(Vector("NVDA", "VOO"))
}
```

When running for the first time, it will guide the user through the authentication process, and then save the refresh token, which will be used and refreshed as necessary.
Subsequent executions will not require user input, and will just use the existing refresh token.