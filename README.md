# schwab4s

This library (partially) includes authentication workflows to authenticate you with the Schwab API, methods to make API calls to a few supported endpoints, and models to represent request and response bodies.

## Config
```hocon
schwab {
  // Become an Individual Developer here:
  // https://developer.schwab.com/user-guides/individual-developer/become-individual-developer
  // Create an app and use the app_key and secret here.
  app_key = ""
  secret = ""
  // This is a path to a file containing the refresh token.
  // It will be autogenerated and updated whenever necessary.
  refresh_token_file = ""
}
```

## Usage
```scala 3
import gg.sina.schwab.Schwab
import zio.*
import zio.connect.file
import zio.connect.file.FileConnector
import zio.http.*


object Example extends ZIOAppDefault {
  private val program: ZIO[Scope & Schwab, Throwable, Unit] = for {
    schwab <- ZIO.service[Schwab]
    accountNumbers <- schwab.TraderAPI.Accounts.accountNumbers
    accounts <- schwab.TraderAPI.Accounts.accounts
    quotes <- schwab.MarketDataAPI.quote(Vector("NVDA", "VOO"))
  } yield ()
  def run: ZIO[ZIOAppArgs & Scope, Any, Any] = program
    .provide(Client.default, Scope.default, file.fileConnectorLiveLayer, Schwab.layer)
}
```

When running for the first time, it will guide the user through the authentication process, and then save the refresh token, which will be used and refreshed as necessary.
Subsequent executions will not require user input, and will just use the existing refresh token.